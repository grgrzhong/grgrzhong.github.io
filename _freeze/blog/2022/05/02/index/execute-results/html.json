{
  "hash": "d47cb4603138c8f4270a67648c5d4e92",
  "result": {
    "markdown": "---\ntitle: \"Make scatter plot with truncated axis\"\ndate: 2022-05-02\ndescription: \"Make scatter plot more beautiful with truncated axis\"\nimage: truncated.png\ncategories:\n  - r\n  - ggplot2\n---\n\n\n\n\n\n# Load data\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(readxl)\nlibrary(tidyverse)\nlibrary(here)\nlibrary(ggh4x)\nlibrary(latex2exp)\n\nfig1a <- read_excel(here(\"projects\", \"data\", \"data.xlsx\"), sheet = \"Figure_1A\")\nfig1a %>% head()\n## # A tibble: 6 × 5\n##   animal.number genotype Fat.mass Lean.Mass sex  \n##           <dbl> <chr>       <dbl>     <dbl> <chr>\n## 1           109 WT           3.87      31.4 Male \n## 2           140 WT           6.98      28.0 Male \n## 3           141 WT           5.66      29.6 Male \n## 4           144 WT           4.37      30.8 Male \n## 5           145 WT           4.32      29.1 Male \n## 6           199 WT           1.62      27.7 Male\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\np1 <- fig1a %>%\n  filter(genotype == \"WT\") %>%\n  ggplot(aes(x = Lean.Mass, y = Fat.mass)) +\n  geom_point(shape = 21, size = 5, fill = \"#929292\", color = \"black\") +\n  scale_x_continuous(\n    limits = c(20, 40),\n    breaks = seq(20, 40, 5),\n    guide = \"axis_minor\",\n    minor_breaks = seq(22.5, 37.5, by = 5)\n  ) +\n  scale_y_continuous(\n    limits = c(0, 25),\n    breaks = seq(0, 25, 5),\n    guide = \"axis_minor\",\n    minor_breaks = c(8, 12)\n  ) +\n  theme_classic() +\n  theme(\n    ggh4x.axis.ticks.length.minor = rel(0.5),\n    axis.ticks.length.x = unit(0.5, \"lines\")\n  ) +\n  guides(\n    x = guide_axis_minor(trunc_lower = 20, trunc_upper = 40),\n    y = guide_axis_truncated(trunc_lower = 0, trunc_upper = 25)\n  ) +\n  geom_vline(xintercept = 32.5, lty = \"dashed\") +\n  geom_hline(yintercept = 10, lty = \"dashed\") +\n  labs(\n    x = NULL,\n    y = \"Fat mass (g)\"\n  ) +\n  annotate(geom = \"point\", x = 20, y = 23 + 1, shape = 21, size = 5, fill = \"#929292\") +\n  annotate(geom = \"text\", x = 20.5, y = 23 + 1, label = \"WT\", size = 5, hjust = 0) +\n  annotate(geom = \"point\", x = 20, y = 22 - 1, shape = 21, size = 5, fill = \"#0533ff\") +\n  annotate(geom = \"text\", x = 20.5, y = 22 - 1, label = TeX(r\"(\\textit{Nnat}${^+}{^/}{^-}{^p}$)\"), size = 5, hjust = 0)\n\n\np2 <- fig1a %>%\n  filter(genotype == \"Nnat+/-p\") %>%\n  ggplot(aes(x = Lean.Mass, y = Fat.mass)) +\n  geom_point(shape = 21, size = 5, fill = \"#0533ff\", color = \"black\") +\n  scale_x_continuous(\n    limits = c(20, 40),\n    breaks = seq(20, 40, 5),\n    guide = \"axis_minor\",\n    minor_breaks = seq(22.5, 37.5, by = 5)\n  ) +\n  scale_y_continuous(\n    limits = c(0, 25),\n    breaks = seq(0, 25, 5),\n    guide = \"axis_minor\",\n    minor_breaks = c(8, 12)\n  ) +\n  theme_classic() +\n  theme(\n    ggh4x.axis.ticks.length.minor = rel(0.5),\n    axis.ticks.length.x = unit(0.5, \"lines\"),\n    axis.line.y = element_blank(),\n    axis.ticks.y = element_blank(),\n    axis.text.y = element_blank()\n  ) +\n  guides(\n    x = guide_axis_minor(\n      trunc_lower = 20,\n      trunc_upper = 40\n    ),\n    y = guide_axis_truncated(\n      trunc_lower = 0,\n      trunc_upper = 25\n    )\n  ) +\n  geom_vline(xintercept = 32.5, lty = \"dashed\") +\n  geom_hline(yintercept = 10, lty = \"dashed\") +\n  labs(x = NULL, y = NULL)\n\nlibrary(patchwork)\np1 + p2 + labs(x = \"Lean mass (g)\") + theme(axis.title.x = element_text(hjust = -0.12))\n## Warning: The S3 guide system was deprecated in ggplot2 3.5.0.\n## ℹ It has been replaced by a ggproto system that can be extended.\n## Warning in is.na(x): is.na() applied to non-(list or vector) of type\n## 'expression'\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-2-1.png){fig-align='center' width=100%}\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}