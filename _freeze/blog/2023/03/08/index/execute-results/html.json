{
  "hash": "41942942aa7ea0c14da38754817521ec",
  "result": {
    "markdown": "---\ntitle: \"Ridgeline plots in ggplot2\"\ndate: 2023-03-08\ncategories:\n  - r\n  - ggplot2\nimage: plot.png\n---\n\n\n\nVisualizing changes in distributions over time or space nicely usning ggrigges.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\npacman::p_load(\n    tidyverse,\n    ggsci,\n    ggridges,\n    ggtext,\n    ggh4x,\n    gapminder,\n    here\n)\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n### subset data\ndf <- gapminder %>% filter(continent %in% c(\"Asia\",\"Europe\"))\ndf\n## # A tibble: 756 × 6\n##    country     continent  year lifeExp      pop gdpPercap\n##    <fct>       <fct>     <int>   <dbl>    <int>     <dbl>\n##  1 Afghanistan Asia       1952    28.8  8425333      779.\n##  2 Afghanistan Asia       1957    30.3  9240934      821.\n##  3 Afghanistan Asia       1962    32.0 10267083      853.\n##  4 Afghanistan Asia       1967    34.0 11537966      836.\n##  5 Afghanistan Asia       1972    36.1 13079460      740.\n##  6 Afghanistan Asia       1977    38.4 14880372      786.\n##  7 Afghanistan Asia       1982    39.9 12881816      978.\n##  8 Afghanistan Asia       1987    40.8 13867957      852.\n##  9 Afghanistan Asia       1992    41.7 16317921      649.\n## 10 Afghanistan Asia       1997    41.8 22227415      635.\n## # ℹ 746 more rows\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(df, aes(y = country, x = lifeExp, fill = continent)) +\n    geom_density_ridges(size = .15, color = \"black\") +\n    scale_x_continuous(\n        ### converse x axis\n        trans = \"log10\", expand = c(0, 0),\n        labels = scales::comma_format(suffix = \"k\", scale = 1e-4)\n    ) +\n    scale_y_discrete(expand = c(0, 0)) +\n    scale_fill_futurama(alpha = .95) +\n    ### facet continent\n    facet_wrap(vars(continent), scales = \"free_y\") +\n    coord_cartesian(clip = \"off\") +\n    theme_minimal() +\n    theme(\n        legend.position = \"bottom\",\n        legend.justification = \"right\",\n        axis.title.x = element_text(margin = margin(t = 10), color = \"black\"),\n        axis.title.y = element_blank(),\n        axis.text.x = element_text(size = 8, color = \"black\"),\n        axis.text.y = element_text(face = \"bold\", color = \"black\"),\n        panel.grid.minor = element_blank(),\n        panel.grid.major.x = element_line(\n            linewidth = .3, linetype = \"dashed\",\n            color = \"grey75\"\n        ),\n        panel.grid.major.y = element_blank(),\n        axis.ticks.x = element_line(linewidth = .3, color = \"black\"),\n        panel.spacing = unit(1, \"lines\"),\n        strip.text = element_text(\n            face = \"bold\", margin = margin(b = 10),\n            color = \"black\", size = 12\n        ),\n        plot.background = element_rect(fill = \"white\", color = NA),\n        plot.margin = margin(20, 20, 20, 20),\n        legend.title = element_blank()\n    ) +\n    guides(fill = guide_legend(\n        override.aes = list(color = NA),\n        label.theme = element_text(color = \"white\", size = 8)\n    ))\n## Picking joint bandwidth of 0.035\n## Picking joint bandwidth of 0.0125\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-2-1.png){fig-align='center' width=85%}\n:::\n\n```{.r .cell-code}\n\n# ggsave(\n#     here(\"blog\", \"2023\", \"03\", \"08\", \"plot.png\")\n#     # width = 6,\n#     # height = 3.8\n#     # units = \"in\",\n#     # type = \"cairo\"\n# )\n```\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}