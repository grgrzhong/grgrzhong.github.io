{
  "hash": "54ebbd07e5d45aa425f3ed7a73472a72",
  "result": {
    "markdown": "---\ntitle: \"Scatter plot with ggplot2\"\ndate: 2023-03-05\ncategories:\n  - r\n  - ggplot2\nimage: plot.png\n---\n\n\n\nMake a nice scatter plot \n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\npacman::p_load(\n    tidyverse,\n    ggpubr,\n    ggprism,\n    patchwork,\n    ggsci,\n    gapminder,\n    here,\n    ggthemes,\n    countrycode,\n    mapproj\n)\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n### subset data\ndf <- gapminder %>%\n    filter(year == \"2007\") %>%\n    mutate(\n        pop2 = pop + 1,\n        continent = case_when(\n            continent == \"Oceania\" ~ \"Asia\",\n            TRUE ~ as.character(continent)\n        ) %>% as.factor() %>%\n            fct_relevel(\"Asia\", \"Americas\", \"Europe\", \"Africa\")\n    )\ndf\n## # A tibble: 142 × 7\n##    country     continent  year lifeExp       pop gdpPercap      pop2\n##    <fct>       <fct>     <int>   <dbl>     <int>     <dbl>     <dbl>\n##  1 Afghanistan Asia       2007    43.8  31889923      975.  31889924\n##  2 Albania     Europe     2007    76.4   3600523     5937.   3600524\n##  3 Algeria     Africa     2007    72.3  33333216     6223.  33333217\n##  4 Angola      Africa     2007    42.7  12420476     4797.  12420477\n##  5 Argentina   Americas   2007    75.3  40301927    12779.  40301928\n##  6 Australia   Asia       2007    81.2  20434176    34435.  20434177\n##  7 Austria     Europe     2007    79.8   8199783    36126.   8199784\n##  8 Bahrain     Asia       2007    75.6    708573    29796.    708574\n##  9 Bangladesh  Asia       2007    64.1 150448339     1391. 150448340\n## 10 Belgium     Europe     2007    79.4  10392226    33693.  10392227\n## # ℹ 132 more rows\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(data = df, aes(x = gdpPercap, y = lifeExp)) +\n    geom_point(aes(size = pop, color = continent)) +\n    geom_point(aes(size = pop2), color = \"black\", shape = 21) +\n    scale_x_log10(breaks = c(\n        500, 1000, 2000, 4000,\n        8000, 16000, 32000, 64000\n    )) +\n    scale_y_continuous(breaks = seq(0, 90, by = 10)) +\n    scale_color_manual(values = c(\n        \"#F15772\", \"#7EEB03\",\n        \"#FBE700\", \"#54D5E9\"\n    )) +\n    scale_size_continuous(range = c(1, 30)) +\n    # guides(size = FALSE, color = FALSE) +\n    guides(fill = guide_legend(override.aes = list(size =5))) +\n    labs(x = \"Income\", y = \"Life expectancy\") +\n    theme_minimal() +\n    #   annotate(\"text\", x = 4000, y = 45, hjust = 0.5,\n    #            size = 85, color = \"#999999\",\n    #            label = \"2007\", alpha = .3,\n    #            family = \"Helvetica Neue\") +\n    annotate(\"segment\",\n        x = 0, xend = 2014, y = 46.9, yend = 46.9,\n        color = \"#606F7B\", linetype = 2, linewidth = .2\n    ) +\n    annotate(\"segment\",\n        x = 2014, xend = 2014, y = 0, yend = 46.9,\n        color = \"#606F7B\", linetype = 2, linewidth = .2\n    ) +\n    annotate(\"text\",\n        x = 28200, y = 2,\n        label = \"per person (GDP/capita, PPP$ inflation-adjusted)\",\n        size = 2.8, color = \"#999999\"\n    ) +\n    annotate(\"text\",\n        x = 2304, y = 42, hjust = 0,\n        size = 3.5,\n        label = paste0(\n            \"Nigeria had a life expectancy of\\n\",\n            \"46.9 years and an annual income of\",\n            \"\\n$2014 per year per person in 2007\"\n        )\n    ) +\n    theme(\n        panel.background = element_rect(fill = \"white\"),\n        plot.background = element_rect(fill = \"white\"),\n        plot.margin = unit(rep(1, 4), \"cm\"),\n        panel.grid.minor = element_blank(),\n        panel.grid.major = element_line(\n            linewidth = 0.2,\n            color = \"#e5e5e5\"\n        ),\n        axis.title.y = element_text(\n            margin = margin(r = 15),\n            size = 11,\n            family = \"Helvetica Neue Light\"\n        ),\n        axis.title.x = element_text(\n            margin = margin(t = 15),\n            size = 11,\n            family = \"Helvetica Neue Light\"\n        ),\n        axis.text = element_text(family = \"Helvetica Neue Light\"),\n        axis.line = element_line(\n            color = \"#999999\",\n            size = 0.2\n        )\n    ) +\n    coord_cartesian(ylim = c(4.1, 86))\n## Warning: The `size` argument of `element_line()` is deprecated as of ggplot2 3.4.0.\n## ℹ Please use the `linewidth` argument instead.\n## Warning: Transformation introduced infinite values in continuous x-axis\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-2-1.png){fig-align='center' width=85%}\n:::\n\n```{.r .cell-code}\n\n# ggsave(\n#     here(\"blog\", \"2023\", \"03\", \"05\", \"plot.png\")\n# )\n```\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}